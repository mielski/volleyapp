{% extends 'base.html' %}
{% from 'bootstrap5/form.html' import render_form, render_field, render_form_row, render_hidden_errors %}
{% from 'bootstrap5/utils.html' import render_icon %}


{% block content %}

  <h1 class="mb-3">Edit Exercise</h1>

  <form name="edit exercise" method="post" class="p-2 ">
    {{ form.hidden_tag() }}
    {{ render_hidden_errors(form) }}
    <div class="form-group form-group-lg mb-3">
      {{ form.title(class_="form-control text-center form_title text-primary") }}
    </div>
    <div class="form-group my-2">
      <label class="form-label h5" for="approach">{{ form.approach.label }}</label>
      {{ form.approach(class_="form-control", rows=10, cols=2) }}
      <div id="approach-as-text"></div>
    </div>

    {{ render_form_row([form.difficulty_level, form.duration, form.skill_focus]) }}
    <p class="text-primary">image control</p>
    <div class="row">
      {% for blob_url in exercise.image_blob_urls %}
        <div class="col-3 d-flex flex-column">
          <img class="img-thumbnail" src="{{ blob_url }}" alt="blob image {{ loop.index }} of exercise">
          <div class="buttonbar d-flex justify-content-center">
            <button type="button" aria-label="select for deletion" aria-pressed="false"
                    class="btn btn-outline-danger button-delete" data-bs-toggle="button" data-index="{{ loop.index0 }}">
              delete
            </button>
          </div>
        </div>
      {% endfor %}
    </div>
    <div class="form-group">
      <div class="">
        {% if filelist | length == 0 %}
          <p>no files in filelist</p>
        {% endif %}
        {{ render_field(form.new_images) }}
        <label class="btn btn-outline-info" for="image_uploads">Choose image(s) to upload (PNG, JPG)</label>
        <input class="form-control-file d-none"
              type="file"
              id="image_uploads"
              name="image_uploads"
              accept=".jpg, .jpeg, .png"
              multiple/>
      </div>
      <div class="preview">
        <p>No files currently selected for upload</p>
      </div>
    </div>
    <div class="btn-group btn-group-lg">
      <button class="btn px-3 btn-success m-2 button100px" type="submit" href="#">Ok</button>
      <button class="btn px-3 btn-light p-1 m-2" type="reset" href="#">Reset</button>
      <a class="btn btn-light p-1 m-2 button100px" href="{{ url_for('exercises.view_all_exercises') }}">Cancel</a>
    </div>
  </form>

  {#  {{ render_form(form) }}#}

  <script src="{{ url_for('static', filename='js/script.js') }}">
  </script>
  <script src="{{ url_for('static', filename='js/testpage.js') }}"></script>
{% endblock %}